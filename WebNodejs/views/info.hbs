{{#section 'css'}}
<title>Cooking</title>
{{/section}}
{{>banner}}
<!--================Blog Area =================-->
<section class="blog_area">
    <div class="container">
        <div class="row">
            <div class="col-lg-4">
                <div class="blog_left_sidebar">
                    <aside class="single_sidebar_widget search_widget list-group">
                        <!-- /input-group -->
                        <div class="br"></div>
                    </aside>
                    <aside class="single_sidebar_widget author_widget">
                        <ul class="nav navbar-nav mr-auto" role="tablist">
                            <li class="nav-item">
                                <a href="#profile" class="list-group-item list-group-item-action active"
                                    data-toggle="tab" id="profile-tab" role="tab" aria-controls="profile"
                                    aria-selected="true">
                                    Hồ sơ</a>
                            </li>
                            <li class="nav-item">
                                <a href="#account" data-toggle="tab" class="list-group-item list-group-item-action"
                                    id="account-tab" data-toggle="tab" role="tab" aria-controls="account"
                                    aria-selected="false">Tài khoản</a>
                            </li>
                            {{#if checkteacher}}
                            <li class="nav-item">
                                <a href="#listcourse" data-toggle="tab" class="list-group-item list-group-item-action"
                                    id="listcourse-tab" data-toggle="tab" role="tab" aria-controls="listcourse"
                                    aria-selected="false">Danh sách công thức</a>
                            </li>
                            {{/if}}
                        </ul>
                        <div class="br"></div>
                    </aside>
                </div>
            </div>
            <!-- List of course-->
            <div class="col-lg-8 tab-content">
                <div class="tab-pane fade" id="listcourse" role="tabpanel" aria-labelledby="listcourse-tab">
                    <div class="blog_right_sidebar" style="padding-bottom : 50px !important;">
                        <div class="border-bottom">
                            <div style="margin: 10px; padding: 10px;">
                                <h2 class="text-center">Danh sách công thức</h2>
                                <h4 class="text-center ">Các công thức đã chia sẻ của tôi</h4>
                            </div>
                        </div>
                        <!-- Info menu {{ item }}-->
                        <div>
                            {{#if this.empty}}
                            <div class="alert alert-warning" role="alert">
                                <p></p>
                                <p class="mb-0">Danh sách rỗng</p>
                            </div>
                            {{else}}
                            <ul class="list-group">
                                {{#each this.list}}
                                <li class="list-group-item d-flex justify-content-between">
                                    <a href="/courses/{{id}}" class="text-black-50">{{namecourse}}</a>
                                    <a href="/updatecourse/{{id}}"><button class="btn btn-success">Cập nhật</button></a>
                                </li>
                            </ul>
                            {{/each}}
                            {{/if}}
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade show active" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                    <div class="blog_right_sidebar" style="padding-bottom : 50px !important;">
                        <div class="border-bottom">
                            <div style="margin: 10px; padding: 10px;">
                                <h2 class="text-center">Hồ sơ</h2>
                                <h4 class="text-center ">Thông tin về bản thân</h4>
                            </div>
                        </div>
                        <!-- Info menu {{ item }}-->
                        <form action="/info" method="POST">
                            <table class="table m-0">
                                {{#each user}} 
                                <tbody>
                                    <tr>
                                        <th>Họ tên</th>
                                        <td id="fullName" name="fullName">{{fullname}}</td>
                                        <input type="text" class="d-none" id = "oldName" name = "oldName" value="{{fullname}}"/>
                                        <!---->
                                        <td><button type="button" onclick="onChangeName()" class="btn btn-success"
                                                id="btnName">Thay đổi</button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>Email</td>
                                        <td id="Email" name="Email">{{email}}</td>
                                        <input type="text" class="d-none" id = "oldEmail" name = "oldEmail" value="{{email}}"/>
                                        <td><button type="button" onclick="onChangeEmail()" class="btn btn-success"
                                                id="btnEmail">Thay đổi</button>
                                        </td>
                                    </tr>
                                </tbody>
                                {{/each}}
                            </table>
                            <div style="height: 30px;"></div>
                            <button type="submit" class="btn btn-primary float-right save">Lưu</button>
                        </form>
                    </div>
                </div>
                <div class="tab-pane fade" id="account" role="tabpanel" aria-labelledby="account-tab">
                    <div class="blog_right_sidebar" style="padding-bottom : 50px !important;">
                        <div class="border-bottom">
                            <div style="margin: 10px; padding: 10px;">
                                <h2 class="text-center">Đổi mật khẩu</h2>
                                <h4 class="text-center ">Thay đổi mật khẩu mới</h4>
                            </div>
                        </div>
                        <!-- Info menu {{ item }}-->
                        <form style="margin: 20px; padding: 20px;" onsubmit="checkPasswordMatch()" method="POST"
                            id="onChangepass">
                            <div class="form-group">
                                <label for="exampleInputPassword1">Mật khẩu cũ</label>
                                <input type="password" class="form-control" id="newpass" name="password">
                                <span style="color: red;" id="newandold"><b></b></span>

                            </div>
                            <div class="form-group">
                                <label for="exampleInputPassword1">Mật khẩu mới</label>
                                <input type="password" class="form-control" id="newpass" name="password">
                                <span style="color: red;" id="newandold"><b></b></span>

                            </div>
                            <div class="form-group">
                                <label for="exampleInputPassword1">Nhập lại mật khẩu</label>
                                <input type="password" class="form-control" id="confirm">
                                <span style="color: red;" id="cconfirm"><b></b></span>
                            </div>
                            <button type="submit" class="btn btn-primary">Lưu</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!--================Infomation =================-->
{{#section 'js'}}

<script>
    function onChangeName() {
        $('#fullName').replaceWith('<td><input type="text" id = "name" name = "name"/></td>');
        $('#btnName').css('display', 'none');
    }
    function onChangeEmail() {
        $('#Email').replaceWith('<td><input type="email" id = "email" name = "email"/></td>');
        $('#btnEmail').css('display', 'none');
    }   
</script>
<script>
    $('#onChangepass').on('submit', function (e) {
        e.preventDefault();
        const check = 1;
        
        const newpass = $('#newpass').val();
        const confirm = $('#confirm').val();
        if (newpass === confirm) {
            document.getElementById("cconfirm").innerHTML = "";
        }
        else {
            document.getElementById("cconfirm").innerHTML = "Not match password !!!";
            check = 0;
        }

        if (check == 1) {
            $('#onChangepass').off('submit').submit();
        }
    });
</script>

{{/section}}